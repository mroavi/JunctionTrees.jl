<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>UAI · JunctionTrees.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JunctionTrees.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JunctionTrees.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../background/">Background</a></li><li><a class="tocitem" href="../../usage/">Usage</a></li><li><span class="tocitem">Vizualization</span><ul><li><a class="tocitem" href="../../visualization/junction_trees/">Junction trees</a></li><li><a class="tocitem" href="../../visualization/markov_random_fields/">Markov random fields</a></li></ul></li><li><span class="tocitem">File formats</span><ul><li class="is-active"><a class="tocitem" href>UAI</a><ul class="internal"><li><a class="tocitem" href="#UAI-model-file-format"><span>UAI model file format</span></a></li><li><a class="tocitem" href="#UAI-evidence-file-format"><span>UAI evidence file format</span></a></li><li><a class="tocitem" href="#UAI-results-file-format"><span>UAI results file format</span></a></li></ul></li><li><a class="tocitem" href="../pace/">PACE</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../library/public/">Public</a></li><li><a class="tocitem" href="../../library/internals/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">File formats</a></li><li class="is-active"><a href>UAI</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>UAI</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mroavi/JunctionTrees.jl/blob/master/docs/src/file_formats/uai.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="UAI-file-formats"><a class="docs-heading-anchor" href="#UAI-file-formats">UAI file formats</a><a id="UAI-file-formats-1"></a><a class="docs-heading-anchor-permalink" href="#UAI-file-formats" title="Permalink"></a></h1><p>This document defines the following file formats:</p><ul><li><a href="#UAI-model-file-format">UAI model file format</a>.</li><li><a href="#UAI-evidence-file-format">UAI evidence file format</a>.</li><li><a href="#UAI-results-file-format">UAI results file format</a>.</li></ul><h2 id="UAI-model-file-format"><a class="docs-heading-anchor" href="#UAI-model-file-format">UAI model file format</a><a id="UAI-model-file-format-1"></a><a class="docs-heading-anchor-permalink" href="#UAI-model-file-format" title="Permalink"></a></h2><p>We use the simple text file format specified below to describe problem instances (Markov networks). The format is a generalization of the Ergo file format initially developed by Noetic Systems Inc. for their Ergo software. We use the <em>.uai</em> suffix for the evaluation benchmark network files.</p><h3 id="Structure"><a class="docs-heading-anchor" href="#Structure">Structure</a><a id="Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Structure" title="Permalink"></a></h3><p>A file in the UAI format consists of the following two parts, in that order:</p><pre><code class="nohighlight hljs">&lt;Preamble&gt;

&lt;Function tables&gt;</code></pre><p>The contents of each section (denoted <code>&lt;...&gt;</code> above) are described in the following:</p><h4 id="Preamble"><a class="docs-heading-anchor" href="#Preamble">Preamble</a><a id="Preamble-1"></a><a class="docs-heading-anchor-permalink" href="#Preamble" title="Permalink"></a></h4><p>Our description of the format will follow a simple Markov network with three variables and two functions. A sample preamble for such a network is:</p><pre><code class="nohighlight hljs">MARKOV
3
2 2 3
2
2 0 1
2 1 2</code></pre><p>The preamble starts with one line denoting the type of network. Generally, this can be either <code>BAYES</code> (if the network is a Bayesian network) or <code>MARKOV</code> (in case of a Markov network). However, note that this year all networks will be given in a Markov networks (i.e. Bayesian networks will be moralized).</p><p>The second line contains the number of variables. The next line specifies the cardinalities of each variable, one at a time, separated by a whitespace (note that this implies an order on the variables which will be used throughout the file). The fourth line contains only one integer, denoting the number of cliques in the problem. Then, one clique per line, the scope of each clique is given as follows: The first integer in each line specifies the number of variables in the clique, followed by the actual indexes of the variables. The order of this list is not restricted. Note that the ordering of variables within a factor will follow the order provided here.</p><p>Referring to the example above, the first line denotes the Markov network, the second line tells us the problem consists of three variables, let&#39;s refer to them as <code>X</code>, <code>Y</code>, and <code>Z</code>. Their cardinalities are 2, 2, and 3 respectively (from the third line). Line four specifies that there are 2 cliques. The first clique is <code>X,Y</code>, while the second clique is <code>Y,Z</code>. Note that variables are indexed starting with 0.</p><h4 id="Function-tables"><a class="docs-heading-anchor" href="#Function-tables">Function tables</a><a id="Function-tables-1"></a><a class="docs-heading-anchor-permalink" href="#Function-tables" title="Permalink"></a></h4><p>In this section each factor is specified by giving its full table (i.e, specifying value for each assignment). The order of the factor is identical to the one in which they were introduced in the preamble, the first variable have the role of the &#39;most significant&#39; digit. For each factor table, first the number of entries is given (this should be equal to the product of the domain sizes of the variables in the scope). Then, one by one, separated by whitespace, the values for each assignment to the variables in the function&#39;s scope are enumerated. Tuples are implicitly assumed in ascending order, with the last variable in the scope as the &#39;least significant&#39;. To illustrate, we continue with our Markov network example from above, let&#39;s assume the following conditional probability tables:</p><pre><code class="nohighlight hljs">X     P(X)
0     0.436
1     0.564

X Y   P(Y,X)
0 0   0.128
0 1   0.872
1 0   0.920
1 1   0.080

Y Z   P(Z,Y)
0 0   0.210
0 1   0.333
0 2   0.457
1 0   0.811
1 1   0.000
1 2   0.189</code></pre><p>The corresponding function tables in the file would then look like this:</p><pre><code class="nohighlight hljs">2
0.436 0.564

4
0.128 0.872
0.920 0.080

6
0.210 0.333 0.457
0.811 0.000 0.189</code></pre><p>(Note that line breaks and empty lines are effectively just a whitespace, exactly like plain spaces &quot; &quot;. They are used here to improve readability.)</p><h3 id="Summary"><a class="docs-heading-anchor" href="#Summary">Summary</a><a id="Summary-1"></a><a class="docs-heading-anchor-permalink" href="#Summary" title="Permalink"></a></h3><p>To sum up, a problem file consists of 2 sections: the preamble and the full the function tables, the names and the labels. For our Markov network example above, the full file will look like:</p><pre><code class="nohighlight hljs">MARKOV
3
2 2 3
3
1 0
2 0 1
2 1 2

2
0.436 0.564

4
0.128 0.872
0.920 0.080

6
0.210 0.333 0.457
0.811 0.000 0.189</code></pre><h2 id="UAI-evidence-file-format"><a class="docs-heading-anchor" href="#UAI-evidence-file-format">UAI evidence file format</a><a id="UAI-evidence-file-format-1"></a><a class="docs-heading-anchor-permalink" href="#UAI-evidence-file-format" title="Permalink"></a></h2><p>Evidence is specified in a separate file. This file has the same name as the original network file but with an added <em>.evid</em> suffix. For instance, <em>problem.uai</em> will have evidence in <em>problem.uai.evid</em>. The file starts with a line specifying the number of evidences samples. The evidence in each sample, will be written in a new line. Each line will begin with the number of observed variables in the sample, followed by pairs of variable and its observed value. The indexes correspond to the ones implied by the original problem file. If, for our above example, we want to provide a single sample where the variable Y   has been observed as having its first value and Z with its second value, the   file <em>example.uai.evid</em> would contain the following:</p><pre><code class="nohighlight hljs">1
2 1 0 2 1</code></pre><h2 id="UAI-results-file-format"><a class="docs-heading-anchor" href="#UAI-results-file-format">UAI results file format</a><a id="UAI-results-file-format-1"></a><a class="docs-heading-anchor-permalink" href="#UAI-results-file-format" title="Permalink"></a></h2><p>The first line must contain only the task solved: <code>PR|MPE|MAR|BEL</code>. The rest of the file will contain the solution for the task. Solvers can write more then one solution by writing <code>-BEGIN-</code> at the head of the new solution. We will only consider the last solution in the file. In the example below the task we choose is <code>PR</code>. We have two solutions. The format of the <code>&lt;SOLUTION&gt;</code> part will be described below.</p><pre><code class="nohighlight hljs">PR
&lt;SOLUTION&gt;
-BEGIN-
&lt;SOLUTION&gt;</code></pre><p>The first line in each solution will contain the number of evidence samples. This will be the number of lines (not include this line) in the solution part. Hence each line from here will contain the solution with a different sample of evidence - ordered as in the evidence file. If there is no evidence (the first line of the evidence file is 0), the output should include the results for the empty evidence scenario. This is regarded as a single-evidence case - one with the empty evidence.</p><p>Solvers that can bound their estimation are encouraged to specify if their solution is lower or upper bound. Doing so by adding at the end of the solution the letters <code>L</code> (for lower bound) or <code>U</code> (for upper bound).</p><p>The line format is as follows (according to the task):</p><ul><li><p><strong>Partition function, PR</strong>: Line with the value of the log10 of the partition function. For example, an approximation log10 Pr(e) = -0.2008 which is known to be an upper bound may have a solution line:</p><pre><code class="nohighlight hljs">-0.2008 U</code></pre></li><li><p><strong>Most probable explanation, MPE</strong>: A space separated line that includes:</p><ol><li>the number n of model variables, and</li><li>the <code>MPE</code> instantiation, a list of value indices for all n variables.</li></ol><p>For example, an input model with 3 binary variables may have a solution line:</p><pre><code class="nohighlight hljs">3 0 1 0</code></pre></li><li><p><strong>Marginals, MAR</strong>: A space separated line that includes:</p><ol><li>The number of variables in the model.</li><li>A list of marginal approximations of all the variables. For each variable its cardinality is first stated, then the probability of each state is stated. The order of the variables is the same as in the model, all data is space separated.</li></ol><p>For example, a model with 3 variables, with cardinalities of 2, 2, 3 respectively. The solution might look like this:</p><pre><code class="nohighlight hljs">3 2 0.1 0.9 2 0.3 0.7 3 0.2 0.2 0.6</code></pre></li><li><p><strong>Beliefs, BEL</strong>: A space separated line that includes:</p><ol><li><p>The number n of model cliques, and</p></li><li><p>A list of belief approximations for all n cliques. Each marginal approximation is specified by a list, starting with the number of entries of the factor, followed by the approximation <span>$Pr(x|e)$</span> for each value of <span>$x$</span> (where is a vector of the clique variables).</p></li></ol><p>For example, if an input model has 2 cliques the first with 2 binary variable and the second with 3. The solution line may look like:</p><pre><code class="nohighlight hljs">2 4 0.25 0.25 0.4 0.1 8 0.1 0.05 0.05 0.2 0.1 0.01 0.04 0.45</code></pre><p>The order of the entries is as in the model description.</p></li></ul><p>Here is a complete example for a solution for the <code>MPE</code> task. The evidence file contains one evidence samples.</p><pre><code class="nohighlight hljs">MPE
1
4 0 2 0 4
-BEGIN-
1
4 0 2 0 4</code></pre><p>If a solver does not produce a solution by the given time, it would be considered as having failed on the instance. This will be treated as equivalent to a naive solution (e.g. bit-wise singleton clique maximum for a <code>MAP</code> problem).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../visualization/markov_random_fields/">« Markov random fields</a><a class="docs-footer-nextpage" href="../pace/">PACE »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Wednesday 13 April 2022 17:57">Wednesday 13 April 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
